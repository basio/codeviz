
    Documents.find().observe({

        // ----------------------------------------------------------------------------------------

        added: function(doc,id) {
            // console.log('added. id: ', id);
            // console.log('isSelectedDoc: ', _isDocumentId(id) );

            // if ( _isDocumentId(id) )
            //  Session.set('ssn_snapshots', doc.snapshots);
        },

        // ----------------------------------------------------------------------------------------

        changed: function(doc,id) {
            // console.log('changed. id: ', id);
            // console.log('isSelectedDoc: ', _isDocumentId(id) );
            // console.log(doc);

            // if ( _isDocumentId(id) )
            //  Session.set('ssn_snapshots', doc.snapshots);
        },

        // ----------------------------------------------------------------------------------------

        removed: function(doc,id) {
            // console.log('removed. id: ', id);
            // console.log('isSelectedDoc: ', _isDocumentId(id) );

            // if ( _isDocumentId(id) )
            //  Session.set('ssn_snapshots', undefined);
        }

        // ----------------------------------------------------------------------------------------

    });//Documents.find().observe

// -----------------------------------------------------------------------------------------------------------------
// VIEW | Divider
// -----------------------------------------------------------------------------------------------------------------

function _divider(flexLayout) {
    // divider: serves as a divider-container (for the divider & divider-button) 
    // between the editor and canvas

    var open = '->';
    var closed = '<-';
    var transition = {curve: 'easeOut', duration: 300};
    var divBtnTxt = closed;
    var toggle = false;

    // -----------------------------------------------------------------------------------------------------------------

    var divider = new famous.surfaces.ContainerSurface({
        size: [20, undefined]
           // properties: {
           //     overflow: 'hidden'
           // }
    });

    // -----------------------------------------------------------------------------------------------------------------

    //divider: placed in the divider-container to serve as a background
    var div = new famous.core.Surface({
        size: [20, undefined],
        properties: {
            backgroundColor: 'grey'
        }
    });

    // -----------------------------------------------------------------------------------------------------------------

    //divider-button-modifier: used to modify the divider-button's position
    var divBtnMod = new famous.core.Modifier({
        transform: famous.core.Transform.translate(0, 350, 0)
    });

    // -----------------------------------------------------------------------------------------------------------------

    //divider button: used to open/close the editor panel
    var divBtn = new famous.core.Surface({
        size: [20, 20],
        content: divBtnTxt,
        properties: {
            textAlign: "center",
            backgroundColor: 'lightgrey'
        }
    });

    divider.add(div);
    divider.add(divBtnMod).add(divBtn);

    // -----------------------------------------------------------------------------------------------------------------

    // Toggle state between 0 and 1
    function toggleState() {
        var ratios = State.ratios;
        divBtn.setContent(toggle ? closed : open);
        flexLayout.setRatios(ratios, transition);
        toggle = !toggle;
    }

    // -----------------------------------------------------------------------------------------------------------------

    // div.on('click', toggleState);
    // divBtn.on('click', toggleState);

    // -----------------------------------------------------------------------------------------------------------------

    return divider;

} //_divider

// -----------------------------------------------------------------------------------------------------------------

function _createContentController(layout) {

    var controller = new Famous.RenderController();

    // -------------------------------------------------------------------------------------------------------------

    layout.content.add(controller);

    return {
        //default handle
        default: controller,
        controller: controller,
        modifier: undefined,
        surface: undefined
    };

}//_createContent


// -----------------------------------------------------------------------------------------------------------------
// Configuration
// -----------------------------------------------------------------------------------------------------------------

function _configureAppView(appView) {

    var home = Factory.Surfaces.createMeteorSurface(Template.home).default;
    var about = Factory.Surfaces.createMeteorSurface(Template.about, {context: 'Example Data'}).default;
    var editor = Factory.LayoutParts.editorCanvas();

    appView.addSection(Route.home, home);
    appView.addSection(Route.editor, editor.layout);
    appView.addSection(Route.about, about);
}

// ---------------------------------------------------------------------------------------------------------------------

function _canvas() {
    var canvas = new Famous.Surface({
        size: [undefined, undefined],
        properties: {
            backgroundColor: 'lightgrey'
        }
    });

    return canvas;
}


        // -------------------------------------------------------------------------------------------------------------
        // PUBLIC MEMBERS
        // -------------------------------------------------------------------------------------------------------------

        //this.layout = headerFooter.layout;
        //this.contentArea = headerFooter.content;

        // -------------------------------------------------------------------------------------------------------------
        // PRIVATE MEMBERS
        // -------------------------------------------------------------------------------------------------------------

        this._currentSection = undefined;
        this._sections = {};


// ---------------------------------------------------------------------------------------------------------------------
// MEMBER FUNCTIONS
// ---------------------------------------------------------------------------------------------------------------------

    AppView.prototype.addSection = function (name, section) {
        if (!section)
            console.log('ERROR: AppView.addSection: parameter section is undefined.');

        if ( (name in this._sections) )
            console.log('WARNING: AppView.addSection: ', name, ' already exists. It is being overridden.');

        this._sections[name] = section;

        return section;
    };

// ---------------------------------------------------------------------------------------------------------------------

    AppView.prototype.getSection = function (name) {
        if ( !(name in this._sections) ) {
            console.log('ERROR: AppView.prototype.section: unknown section name: ', name);
            return undefined;
        }

        return this._sections[name];
    };

// ---------------------------------------------------------------------------------------------------------------------

    AppView.prototype.currentSection = function () {
        return this._currentSection;
    };

// ---------------------------------------------------------------------------------------------------------------------

    AppView.prototype.showSection = function (name) {
        if ( !(name in this._sections) ) {
            console.log('ERROR: AppView.prototype.show: unknown section name: ', name);
            return;
        }

        var surface = this._sections[name];
        this._currentSection = surface;
        this.contentArea.show(surface);
    };

// ---------------------------------------------------------------------------------------------------------------------

    AppView.prototype.hideCurrentSection = function() {
        this.contentArea.hide();
    };